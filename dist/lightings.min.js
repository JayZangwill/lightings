"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if(function(){function t(){this.xhr=new XMLHttpRequest,this.isIe9=navigator.userAgent.indexOf("MSIE 9.0")>0}function e(t){return"[object Object]"===t.toString()}function o(t){var e=[];for(var o in t)e.push(o+"="+t[o]);return t=e.join("&")}function i(t,i,s,n){if("string"!=typeof t)throw Error("url is no define or illegal");if(this.url=t,"string"==typeof i)this.data=i,this.options=s;else if(i&&"object"===(void 0===i?"undefined":_typeof(i))&&"undefined"==typeof optoins&&i.config){s={};for(var r in i)s[r]=i[r];i=void 0}else i&&e(i)&&(this.data=o(i));if(n)return void(this.callbackName=s&&s.callbackName||"callback");this.el=s&&s.el,this.flag=this.dataType=s&&s.dataType||"json",this.async=!s||!1!==s.async,this.contentType=s&&s.contentType||"application/x-www-form-urlencoded; charset=UTF-8",this.timeout=s&&s.timeout||0,this.progress=s&&s.progress,"xml"!==this.dataType&&"html"!==this.dataType||(this.dataType="")}function s(t,e){var o=void 0;return new Promise(function(i,s){if(e.async&&(e.xhr.responseType=e.dataType.toLowerCase()),e.xhr.onreadystatechange=function(){if(4===this.readyState)if(this.status>=200&&this.status<300||304===this.status){if("xml"===e.flag)i(this.responseXML);else if(e.isIe9||!e.async)try{i(JSON.parse(this.responseText)),n.call(e,JSON.parse(this.responseText))}catch(t){i(this.responseText)}else i(this.response),n.call(e,this.response);o&&clearTimeout(o)}else s(this.status,this.statusText)},"get"===t){var r=e.url;e.data&&(r+="?"+e.data),e.xhr.open(t,r,e.async),e.xhr.send(null)}else"post"===t&&(e.xhr.open(t,e.url,e.async),e.xhr.setRequestHeader("Content-type",e.contentType),e.xhr.send(e.data));e.async&&e.timeout>0&&(o=setTimeout(function(){e.xhr.abort(),s("timeout")},e.timeout)),e.xhr.onprogress=function(t){e.progress&&e.progress.call(this,t)}})}function n(t){var e=document.querySelector(this.el),o=void 0,i=void 0,s=void 0,n=void 0,r=void 0,a=!0,h=document.createDocumentFragment(),c=/{{(.+?)}}/g;if(this.el&&e&&"json"===this.dataType){if(void 0===e)throw Error("Cannot find element: "+this.el);if("body"===e.nodeName.toLowerCase()||"html"===e.nodeName.toLowerCase())throw Error("Do not mount Lightings to <html> or <body> - mount to normal elements instead.");for(;e.firstChild;)h.appendChild(e.firstChild);n=h.childNodes,Array.prototype.slice.call(n).forEach(function(e){for(a=!0,s="",r=e.textContent;c.test(r);)i=t,o=RegExp.$1.trim().split("."),o.forEach(function(t){i=i[t]}),a?(s=r.replace(/{{.+?}}/,i),a=!1):s=s.replace(/{{.+?}}/,i);e.textContent=s}),e.appendChild(h)}}t.prototype={constructor:t,get:function(t,e,o){return i.call(this,t,e,o),s("get",this)},post:function(t,e,o){return i.call(this,t,e,o),s("post",this)},jsonp:function(t,e,o){var s=this,n=document.createElement("script"),r=""+Math.random()+Math.random();return new Promise(function(a,h){try{i.call(s,t,e,o,!0),r=r.replace(/0\./g,"_"),n.src=s.data?s.url+"?"+s.callbackName+"=Lightings"+r+"&"+s.data:s.url+"?"+s.callbackName+"=Lightings"+r,document.body.appendChild(n),n.onload=function(){window["Lightings"+r]=a,document.body.removeChild(n)}}catch(t){h(t)}})}},window.lightings=new t}(),!window.Promise){var _Promise=function t(e){var o=this;if(this.status="pending",this.thenCache=[],!(this instanceof t))throw'Defer is a constructor and should be called width "new" keyword';if("function"!=typeof e)throw"Defer params must be a function";setTimeout(function(){try{e.call(this,o.resolve.bind(o),o.reject.bind(o))}catch(t){o.reject(t)}},0)};_Promise.prototype.resolve=function(t){this.value=t,this.status="resolved",this.triggerThen()},_Promise.prototype.reject=function(t){this.value=t,this.status="rejected",this.triggerThen()},_Promise.prototype.then=function(t,e){return this.thenCache.push({onResolve:t,onReject:e}),this},_Promise.prototype.catch=function(t){"function"==typeof t&&(this.errorHandle=t)},_Promise.prototype.triggerThen=function(){var t,e=this.thenCache.shift();if(!e&&"resolved"===this.status)return this;if(!e&&"rejected"===this.status)return this.errorHandle&&(this.value=this.errorHandle.call(void 0,this.value),this.status="resolved"),this;if("resolved"===this.status?t=e.onResolve:"rejected"===this.status&&(t=e.onReject),"function"==typeof t)try{this.value=t.call(void 0,this.value),this.status="resolved",this.triggerThen()}catch(t){return this.status="rejected",this.value=t,this.triggerThen()}else this.triggerThen()},window.Promise=_Promise}