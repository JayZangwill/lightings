"use strict";if(function(){function t(e){return new t.prototype.init(e)}function e(t,e){var s=void 0;return new Promise(function(i,r){if(e.xhr.responseType=e.dataType.toLowerCase(),"get"===t){var o=e.url;e.data&&(o+="?"+e.data),e.xhr.open(e.type,o,e.async),e.xhr.send(null)}else"post"===t&&(e.xhr.open(e.type,e.url,e.async),e.xhr.setRequestHeader("Content-type",e.contentType),e.xhr.send(e.data));e.xhr.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<300||304===this.status?(i("xml"===e.flag?this.responseXML:e.isIe9?JSON.parse(this.responseText):this.response),s&&clearTimeout(s)):r(this.status,this.statusText))},e.async&&e.timeout>0&&(s=setTimeout(function(){e.xhr.abort(),r("timeout")},e.timeout)),e.xhr.onloadstart=function(t){e.start&&e.start.call(this,t)},e.xhr.onprogress=function(t){e.progress&&e.progress.call(this,t)}})}function s(t,e){e.el&&function(){var s=document.querySelectorAll(e.el)[0],i=s.innerHTML,r=void 0,o=t,n=void 0,a=!0,h=/{{(.+?)}}/g;if(void 0===s)throw Error("Cannot find element: "+e.el);if("body"===s.nodeName.toLowerCase()||"html"===s.nodeName.toLowerCase())throw Error("Do not mount Lightings to <html> or <body> - mount to normal elements instead.");for(;h.exec(i);)o=t,r=RegExp.$1.split("."),r.forEach(function(t){o=o[t]}),a?(n=i.replace(/{{.+?}}/,o),a=!1):n=n.replace(/{{.+?}}/,o);n&&(s.innerHTML=n)}()}t.prototype={constructor:t,init:function(t){var e=this;if(this.el=t.el,this.url=t.url,this.success=t.success,this.error=t.error,this.start=t.start,this.progress=t.progress,this.timeout=t.timeout||0,this.type=t.type||"get",this.flag=this.dataType=t.dataType||"json",this.contentType=t.contentType||"application/x-www-form-urlencoded; charset=UTF-8",this.data=t.data||null,this.callbackName=t.callbackName||"callback",this.async=t.async||!0,this.xhr=new XMLHttpRequest,this.isIe9=navigator.userAgent.indexOf("MSIE 9.0")>0,!this.url)throw Error("url is not defined");if("xml"!==this.dataType&&"html"!==this.dataType||(this.dataType=""),"boolean"!=typeof this.async&&(this.async=!0),this.data&&"[object Object]"===this.data.toString()){var i=[];for(var r in this.data)i.push(r+"="+this.data[r]);this.data=i.join("&")}else"string"!=typeof this.data&&(this.data=void 0);if("jsonp"===this.dataType){var o=document.createElement("script"),n=""+Math.random()+Math.random();return n=n.replace(/0\./g,"_"),o.src=this.data?this.url+"?"+this.callbackName+"=Lightings"+n+"&"+this.data:this.url+"?"+this.callbackName+"=Lightings"+n,document.body.appendChild(o),this.success&&"function"==typeof this.success&&(window["Lightings"+n]=this.success),document.body.removeChild(o),this}return"get"===this.type&&this.get().then(function(t){s(t,e),e.success&&e.success.call(e,t)}).catch(function(t){e.error&&e.error.call(e,t)}),"post"===this.type&&this.post().then(function(t){s(t,e),e.success&&e.success.call(e,t)}).catch(function(t){e.error&&e.error.call(e,t)}),this},get:function(){return e("get",this)},post:function(){return e("post",this)}},t.prototype.init.prototype=t.prototype,window.Lightings=t}(),!window.Promise){var _Promise=function t(e){var s=this;if(this.status="pending",this.thenCache=[],!(this instanceof t))throw'Defer is a constructor and should be called width "new" keyword';if("function"!=typeof e)throw"Defer params must be a function";setTimeout(function(){try{e.call(this,s.resolve.bind(s),s.reject.bind(s))}catch(t){s.reject(t)}},0)};_Promise.prototype.resolve=function(t){this.value=t,this.status="resolved",this.triggerThen()},_Promise.prototype.reject=function(t){this.value=t,this.status="rejected",this.triggerThen()},_Promise.prototype.then=function(t,e){return this.thenCache.push({onResolve:t,onReject:e}),this},_Promise.prototype.catch=function(t){"function"==typeof t&&(this.errorHandle=t)},_Promise.prototype.triggerThen=function(){var t,e=this.thenCache.shift();if(!e&&"resolved"===this.status)return this;if(!e&&"rejected"===this.status)return this.errorHandle&&(this.value=this.errorHandle.call(void 0,this.value),this.status="resolved"),this;if("resolved"===this.status?t=e.onResolve:"rejected"===this.status&&(t=e.onReject),"function"==typeof t)try{this.value=t.call(void 0,this.value),this.status="resolved",this.triggerThen()}catch(t){return this.status="rejected",this.value=t,this.triggerThen()}else this.triggerThen()},window.Promise=_Promise}