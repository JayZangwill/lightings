"use strict";!function(){function t(e){return new t.prototype.init(e)}function e(t,e){return new Promise(function(n,r){if(e.xhr.responseType=e.dataType,"get"===t){var i=e.url;e.data&&(i+="?"+e.data),e.xhr.open(e.type,i,e.async),e.xhr.send(null)}else"post"===t&&(e.xhr.open(e.type,e.url,e.async),e.xhr.setRequestHeader("Content-type",e.contentType),e.xhr.send(e.data));e.xhr.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<300||304===this.status?n("xml"===this.flag?this.responseXML:this.response):r(this.status,this.statusText))}})}t.prototype={constructor:t,init:function(t){var e=this;if(this.url=t.url,this.success=t.success,this.error=t.error,this.type=t.type||"get",this.flag=this.dataType=t.dataType.toLowerCase()||"json",this.contentType=t.contentType||"application/x-www-form-urlencoded",this.data=t.data||null,this.callbackName=t.callbackName||"callback",this.async=t.async||!0,this.xhr=new XMLHttpRequest,!this.url)throw Error("url is undefined");if("xml"!==this.dataType&&"html"!==this.dataType||(this.dataType=""),"boolean"!=typeof this.async&&(this.async=!0),this.data&&"[object Object]"===this.data.toString()){var n=[];for(var r in this.data)n.push(r+"="+this.data[r]);this.data=n.join("&")}else"string"!=typeof this.data&&(this.data=void 0);if("jsonp"===this.dataType){var i=document.createElement("script"),o=""+Math.random()+Math.random();return o=o.replace(/0\./g,"_"),i.src=this.data?this.url+"?"+this.callbackName+"=Lightings"+o+"&"+this.data:this.url+"?"+this.callbackName+"=Lightings"+o,document.body.appendChild(i),this.success&&"function"==typeof this.success&&(window["Lightings"+o]=this.success),document.body.removeChild(i),this}return"get"===this.type&&this.get().then(function(t){e.success&&"function"==typeof e.success&&e.success.call(e,t)}).catch(function(t){e.error&&"function"==typeof e.error&&e.error.call(e,t)}),"post"===this.type&&this.post().then(function(t){e.success&&"function"==typeof e.success&&e.success.call(e,t)}).catch(function(t){e.error&&"function"==typeof e.error&&e.error.call(e,t)}),this},get:function(){return e("get",this)},post:function(){return e("post",this)}},t.prototype.init.prototype=t.prototype,window.Lightings=t}(),function(){!function(t,e){function n(t){return c[a]=r.apply(e,t),a++}function r(t){var n=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(e,n):new Function(""+t)()}}function i(t){if(u)setTimeout(r(i,t),0);else{var e=c[t];if(e){u=!0;try{e()}finally{o(t),u=!1}}}}function o(t){delete c[t]}if(!t.setImmediate){var s,a=1,c={},u=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(){var t=n(arguments);return process.nextTick(r(i,t)),t}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&i(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),s=function(){var r=n(arguments);return t.postMessage(e+r,"*"),r}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){i(t.data)},s=function(){var e=n(arguments);return t.port2.postMessage(e),e}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;s=function(){var e=n(arguments),r=f.createElement("script");return r.onreadystatechange=function(){i(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r),e}}():function(){s=function(){var t=n(arguments);return setTimeout(r(i,t),0),t}}(),h.setImmediate=s,h.clearImmediate=o}}(new Function("return this")()),function(t){function e(t){this[T]=t}function n(t){return t instanceof e}function r(t){return Object(t)===t}function i(t){return"function"==typeof t}function o(t){return t instanceof m}function s(t){return t}function a(t){throw t}function c(t,e,n){t[w]||(t[w]=[],t[b]=[]),t[w].push(e),t[b].push(n)}function u(t){delete t[w],delete t[b]}function f(t){var e,n=t.length;for(e=0;e<n;e++)t[e]()}function h(t,e,r){var i=l(r);o(i)?i.then(t,e):n(i)?e(i[T]):t(r)}function l(t){var n;if(o(t))return t;if(r(t)){try{n=t.then}catch(t){return new e(t)}if(i(n))return new m(function(e,r){P(function(){try{n.call(t,e,r)}catch(t){r(t)}})})}return null}function p(t,e){function n(e){t[g]==j&&d(t,e)}function r(e){t[g]==j&&y(t,e)}try{e(n,r)}catch(t){r(t)}}function d(t,e){var r,i=l(e);o(i)?(t[g]=x,i.then(function(e){d(t,e)},function(e){y(t,e)})):n(i)?y(t,i[T]):(t[g]=E,t[v]=e,(r=t[w])&&r.length&&(u(t),f(r)))}function y(t,e){var n=t[b];t[g]=M,t[v]=e,n&&n.length&&(u(t),f(n))}function m(t){var e=this;if(!o(e))throw new TypeError(O);e[g]=j,e[v]=void 0,p(e,t)}var g="[[PromiseStatus]]",v="[[PromiseValue]]",w="[[OnFulfilled]]",b="[[OnRejected]]",T="[[OriginalError]]",j="pending",x="internal pending",E="fulfilled",M="rejected",O='constructor Promise requires "new".',P=t.setImmediate||require("timers").setImmediate,L=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)};m.prototype.then=function(t,e){var n,r=this;return t=i(t)?t:s,e=i(e)?e:a,n=new m(function(i,o){function s(t){var e;try{e=t(r[v])}catch(t){return void o(t)}e===n?o(new TypeError("then() cannot return same Promise that it resolves.")):h(i,o,e)}function a(){P(s,t)}function u(){P(s,e)}switch(r[g]){case E:a();break;case M:u();break;default:c(r,a,u)}})},m.prototype.catch=function(t){return this.then(s,t)},m.resolve=function(t){var e=l(t);return o(e)?e:new m(function(r,i){n(e)?i(e[T]):r(t)})},m.reject=function(t){return new m(function(e,n){n(t)})},m.race=function(t){return new m(function(e,n){var r,i;if(L(t))for(i=t.length,r=0;r<i;r++)h(e,n,t[r]);else n(new TypeError("not an array."))})},m.all=function(t){return new m(function(e,r){var i,s,a,c,u=0,f=0;if(L(t)){for(t=t.slice(0),s=t.length,c=0;c<s;c++)a=t[c],i=l(a),o(i)?(f++,i.then(function(n){return function(r){t[n]=r,++u==f&&e(t)}}(c),r)):n(i)?r(i[T]):t[c]=a;f||e(t)}else r(new TypeError("not an array."))})},"undefined"!=typeof module&&module.exports?module.exports=t.Promise||m:t.Promise||(t.Promise=m)}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{});