"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if(function(){function t(){this.xhr=new XMLHttpRequest,this.isIe9=navigator.userAgent.indexOf("MSIE 9.0")>0}function e(t){return"[object Object]"===t.toString()}function o(t){var e=[];for(var o in t)e.push(o+"="+t[o]);return t=e.join("&")}function s(t,s,i,n){if("string"!=typeof t)throw Error("url is no define or illegal");if(this.url=t,"string"==typeof s)this.data=s,this.options=i;else if(s&&"object"===(void 0===s?"undefined":_typeof(s))&&"undefined"==typeof optoins&&s.config){i={};for(var r in s)i[r]=s[r];s=void 0}else s&&e(s)&&(this.data=o(s));if(n)return void(this.callbackName=i&&i.callbackName||"callback");this.el=i&&i.el,this.flag=this.dataType=i&&i.dataType||"json",this.async=i&&i.async===!1||!0,this.contentType=i&&i.contentType||"application/x-www-form-urlencoded; charset=UTF-8",this.timeout=i&&i.timeout||0,this.progress=i&&i.progress,"xml"!==this.dataType&&"html"!==this.dataType||(this.dataType="")}function i(t,e){var o=void 0;return new Promise(function(s,i){if(e.xhr.responseType=e.dataType.toLowerCase(),"get"===t){var r=e.url;e.data&&(r+="?"+e.data),e.xhr.open(t,r,e.async),e.xhr.send(null)}else"post"===t&&(e.xhr.open(t,e.url,e.async),e.xhr.setRequestHeader("Content-type",e.contentType),e.xhr.send(e.data));e.xhr.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<300||304===this.status?("xml"===e.flag?s(this.responseXML):e.isIe9?(s(JSON.parse(this.responseText)),n.call(e,JSON.parse(this.responseText))):(s(this.response),n.call(e,this.response)),o&&clearTimeout(o)):i(this.status,this.statusText))},e.async&&e.timeout>0&&(o=setTimeout(function(){e.xhr.abort(),i("timeout")},e.timeout)),e.xhr.onprogress=function(t){e.progress&&e.progress.call(this,t)}})}function n(t){var e=this;this.el&&document.querySelectorAll(this.el)[0]&&"json"===this.dataType&&function(){var o=document.querySelectorAll(e.el)[0],s=o.innerHTML,i=void 0,n=t,r=void 0,a=!0,h=/{{(.+?)}}/g;if(void 0===o)throw Error("Cannot find element: "+e.el);if("body"===o.nodeName.toLowerCase()||"html"===o.nodeName.toLowerCase())throw Error("Do not mount Lightings to <html> or <body> - mount to normal elements instead.");for(;h.exec(s);)n=t,i=RegExp.$1.split("."),i.forEach(function(t){n=n[t]}),a?(r=s.replace(/{{.+?}}/,n),a=!1):r=r.replace(/{{.+?}}/,n);r&&(o.innerHTML=r)}()}t.prototype={constructor:t,get:function(t,e,o){return s.call(this,t,e,o),i("get",this)},post:function(t,e,o){return s.call(this,t,e,o),i("post",this)},jsonp:function(t,e,o){var i=this,n=document.createElement("script"),r=""+Math.random()+Math.random();return new Promise(function(a,h){try{s.call(i,t,e,o,!0),r=r.replace(/0\./g,"_"),n.src=i.data?i.url+"?"+i.callbackName+"=Lightings"+r+"&"+i.data:i.url+"?"+i.callbackName+"=Lightings"+r,document.body.appendChild(n),window["Lightings"+r]=a,document.body.removeChild(n)}catch(t){h(t)}})}},window.lightings=new t}(),!window.Promise){var _Promise=function t(e){var o=this;if(this.status="pending",this.thenCache=[],!(this instanceof t))throw'Defer is a constructor and should be called width "new" keyword';if("function"!=typeof e)throw"Defer params must be a function";setTimeout(function(){try{e.call(this,o.resolve.bind(o),o.reject.bind(o))}catch(t){o.reject(t)}},0)};_Promise.prototype.resolve=function(t){this.value=t,this.status="resolved",this.triggerThen()},_Promise.prototype.reject=function(t){this.value=t,this.status="rejected",this.triggerThen()},_Promise.prototype.then=function(t,e){return this.thenCache.push({onResolve:t,onReject:e}),this},_Promise.prototype.catch=function(t){"function"==typeof t&&(this.errorHandle=t)},_Promise.prototype.triggerThen=function(){var t,e=this.thenCache.shift();if(!e&&"resolved"===this.status)return this;if(!e&&"rejected"===this.status)return this.errorHandle&&(this.value=this.errorHandle.call(void 0,this.value),this.status="resolved"),this;if("resolved"===this.status?t=e.onResolve:"rejected"===this.status&&(t=e.onReject),"function"==typeof t)try{this.value=t.call(void 0,this.value),this.status="resolved",this.triggerThen()}catch(t){return this.status="rejected",this.value=t,this.triggerThen()}else this.triggerThen()},window.Promise=_Promise}